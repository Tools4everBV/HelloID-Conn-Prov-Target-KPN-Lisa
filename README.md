# HelloID-Conn-Prov-Target-KPN-Lisa

| :information_source: Information |
|:---------------------------|
| This repository contains the connector and configuration code only. The implementer is responsible to acquire the connection details such as username, password, certificate, etc. You might even need to sign a contract or agreement with the supplier before implementing this connector. Please contact the client's application manager to coordinate the connector requirements.       |

<br />
<p align="center">
  <img src="https://www.tools4ever.nl/connector-logos/kpn-logo.png" width="500">
</p>

## Table of contents

- [Introduction](#Introduction)
- [Getting started](#Getting-started)
  + [Connection settings](#Connection-settings)
  + [Prerequisites](#Prerequisites)
  + [Remarks](#Remarks)
- [Setup the connector](Setup-The-Connector)
- [Getting help](Getting-help)
- [Contributing](Contributing)
- [Code Contributors](Code-Contributors)

## Introduction

The _HelloID-Conn-Prov-Target-KPN-Lisa_ is a cloud desktop workplace application and provides a set of REST APIs that allow you to programmatically interact with its data. With the connector, you can manage the user's and user's authorizations. Which displays in two permissions references. One manages the groups and one the LicenseProfiles. And in addition, there will be a default WorkspaceProfle added to the account while creating the account.

## Getting started

### Connection settings

The following settings are required to connect to the API.

| Setting     | Description |
| ------------ | ----------- |
| AADTenantDomain          | The windows domain name of your Azure environment, e.g  "myazuredomain.onmicrosoft.com"                   |
| AADTenantID      | The Azure Tenant ID of your Azure environment                  |
| AADAppID               |     The App ID of the "App registration" in your Azure AD enviroment. The "App registration" in Azure is the identity with which this HelloID connector will log in your Azure environment to perform all actions |
| Scope               |     The version of the API that's being used |
| AADAppSecret               |     The "Client secret" generated by the "App registration" in your Azure AD enviroment, that serves as a sort of password.

### Prerequisites

- Microsoft AzureAD

- An App registration in Azure to be used by KPN Lisa.

> The _HelloID-Conn-Prov-Target-KPNLisa_ connector is built for both Windows PowerShell 5.1 and PowerShell Core 7. This means the connector can be executed using the _On-Premises_ HelloID agent as well as in the cloud.

### Remarks

- When a new user is created in KPN Lisa, a default password is generated automatically by KPN Lisa. That password will also be returned in the response. At this point that password is not send back to HelloID.
- The WorkspaceProfile is added hardcoded in the account create.ps1 as a recommendation from the supplier. Because its uncommon that an account needs a different WorkspaceProfile. When a different WorkspaceProfile is required they can request a self-service request to KPN. Or we must change the connector and manage the WorkspaceProfiles as Permissions.
- The workspace profile is exclusively added when the account is created. The workspace profile will not be added on a account correlation

### Contents

| Files       | Description                                |
| ----------- | ------------------------------------------ |
| create.ps1                    | Creates or Correlates the account plus additional actions _(see below)_|
| update.ps1                    | Update the account which additional actions _(see below)_   |
| enable.ps1                    | Enables the account      |
| disable.ps1                   | Disabale the account     |
| delete.ps1                    | Deletes the account      |
| entitlementsGroups.ps1        | Retrieves the groups                                      |
| grantPermissionGroup.ps1      | Grant a group to an Account    |
| revokePermissionGroup.ps1     | Revokes a group from an Account     |
| entitlementsLicenseProfiles.ps1     | Retrieves the LicenseProfile        |
| grantPermissionLicenseProfiles.ps1  | Grant a LicenseProfiles  to an Account    |
| revokePermissionLicenseProfiles.ps1 | Revokes a LicenseProfile  from an Account   |

##### Create

  The Create/Update account performs multiple web calls to creating and modifying the Account. When one of the web calls fails the action will be marked as Failed.

  - Create or corrolate a account in KPN Lisa
  - Set the manager to the account
  - Sets a default WorkSpaceProfile _(Ontzorgd/Assisted)_ Only on create!   # Hardcoded


##### Update
  - Update an account in KPN Lisa
  - Update the manager the account _or_
  - Remove the manager from the account

## Setup the connector

The connector files include the account life cycle and two separate Permissions definitions.

For help setting up a new target connector, please refer to our [documentation](https://docs.helloid.com/hc/en-us/articles/360012388639-How-to-add-a-target-system)

## Getting help

> _If you need help, feel free to ask questions on our [forum](https://forum.helloid.com)_

## HelloID Docs

The official HelloID documentation can be found at: https://docs.helloid.com/
Specific info by the provider about the Kpn Lisa api Itself can be found at  https://mwpapi.kpnwerkplek.com/index.html
