# HelloID-Conn-Prov-Target-KPN-Lisa
Repository for HelloID Provisioning Target Connector to AFAS Employees

<p>
    <a href="https://github.com/Tools4everBV/HelloID-Conn-Prov-Target-KPN-Lisa/network/members">
        <img src="https://img.shields.io/github/forks/Tools4everBV/HelloID-Conn-Prov-Target-KPN-Lisa" alt="Forks Badge"/>
    </a>
    <a href="https://github.com/Tools4everBV/HelloID-Conn-Prov-Target-KPN-Lisa/pulls">
        <img src="https://img.shields.io/github/issues-pr/Tools4everBV/HelloID-Conn-Prov-Target-KPN-Lisa" alt="Pull Requests Badge"/>
    </a>
    <a href="https://github.com/Tools4everBV/HelloID-Conn-Prov-Target-KPN-Lisa/issues">
        <img src="https://img.shields.io/github/issues/Tools4everBV/HelloID-Conn-Prov-Target-KPN-Lisa" alt="Issues Badge"/>
    </a>
    <a href="https://github.com/Tools4everBV/HelloID-Conn-Prov-Target-KPN-Lisa/graphs/contributors">
        <img alt="GitHub contributors" src="https://img.shields.io/github/contributors/Tools4everBV/HelloID-Conn-Prov-Target-KPN-Lisa?color=2b9348">
    </a>
</p>

> [!WARNING]
> This script is for the new powershell connector. Make sure to use the mapping and correlation keys like mentionded in this readme. For more information, please read our [documentation](https://docs.helloid.com/en/provisioning/target-systems/powershell-v2-target-systems.html)

> [!NOTE]
> This repository contains the connector and configuration code only. The implementer is responsible to acquire the connection details such as username, password, certificate, etc. You might even need to sign a contract or agreement with the supplier before implementing this connector. Please contact the client's application manager to coordinate the connector requirements.

<p align="center">
  <img src="https://www.tools4ever.nl/connector-logos/kpn-logo.png" width="500">
</p>

## Table of contents

- [Introduction](#introduction)
- [Getting started](#getting-started)
- [Connection settings](#connection-settings)
- [Prerequisites](#prerequisites)
- [Remarks](#remarks)
- [Contents](#contents)
    - [Create](#create)
    - [Update](#update)
    - [Permission: Workspace Profile](#permission-workspace-profile)
- [KPN Lisa Docs](#kpn-lisa-docs)
- [Setup the connector](#setup-the-connector)
- [Getting help](#getting-help)
- [HelloID Docs](#helloid-docs)


## Introduction

The _HelloID-Conn-Prov-Target-KPN-Lisa_ is a cloud desktop workplace application and provides a set of REST APIs that allow you to programmatically interact with its data. With the connector, you can manage the user's and user's authorizations. Which displays in two permissions references. One manages the groups and one the LicenseProfiles. And in addition, there will be a default WorkspaceProfle added to the account while creating the account.

## Getting started

### Connection settings

The following settings are required to connect to the API.

| Setting     | Description |
| ------------ | ----------- |
| AADTenantDomain | The windows domain name of your Azure environment, e.g  "myazuredomain.onmicrosoft.com" |
| AADTenantID | The Azure Tenant ID of your Azure environment |
| AADAppID | The App ID of the "App registration" in your Azure AD enviroment. The "App registration" in Azure is the identity with which this HelloID connector will log in your Azure environment to perform all actions |
| Scope | The version of the API that's being used |
| AADAppSecret | The "Client secret" generated by the "App registration" in your Azure AD enviroment, that serves as a sort of password. |

### Prerequisites

- Microsoft AzureAD

- An App registration in Azure to be used by KPN Lisa.

> [!NOTE]
> The _HelloID-Conn-Prov-Target-KPNLisa_ connector is built for PowerShell Core 7. This means the connector can be executed using the cloud HelloID agent.

### Remarks

- When a new user is created in KPN Lisa, a default password is generated automatically by KPN Lisa. That password will also be returned in the response. At this point that password is not send back to HelloID.

### Contents

This connector tries to catch all the person provisioning actions to the target system, some specialties will me highlighted below.

#### Correlation

correlation will match the value of the person field to the account correlation field name in the target system. Both fields need to be selected in the correlation configuration screen.

#### Create

The Create/Update account performs multiple web calls to creating and modifying the Account. When one of the web calls fails the action will be marked as Failed.

  - Create or corrolate a account in KPN Lisa
  - Set the manager to the account

#### Update

  - Update an account in KPN Lisa
  - Update the manager of the account _or_
  - Remove the manager from the account

#### Permission: Workspace Profile

A User can only have one Workspaceprofile, so be careful not to add multiple profiles to a user as this will overwrite previously granted profiles. The return will remove whatever workspaceProfile is active at the moment. This can result in unwanted behaviour.

## KPN Lisa Docs

The API documentation specifies all fields that can be set to the user. All string and number values can be uses in this connector. See the [KPN Lisa Docs](https://mwpapi.kpnwerkplek.com/index.html#model-User) for the full list of fields. Boolean values need a modification in the scripts as result of limitations by HelloID.

## Setup the connector

The connector files include the account life cycle and two separate Permissions definitions.

For help setting up a new target connector, please refer to our [documentation](https://docs.helloid.com/hc/en-us/articles/360012388639-How-to-add-a-target-system)

## Getting help

> _If you need help, feel free to ask questions on our [forum](https://forum.helloid.com)_

## HelloID Docs

The official HelloID documentation can be found at: https://docs.helloid.com/
Specific info by the provider about the Kpn Lisa api Itself can be found at  https://mwpapi.kpnwerkplek.com/index.html
